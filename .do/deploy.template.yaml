spec:
  name: yamo
  services:
    - name: app
      github:
        branch: digital-ocean-2
        deploy_on_push: true
        repo: levhita/yamo
      build_command: |
        cd frontend && npm install && npm run build && cd ../api && npm install
      run_command: cd api && npm start
      envs:
        - key: YAMO_MYSQL_HOST
          scope: RUN_TIME
          type: SECRET
        - key: YAMO_MYSQL_USER
          scope: RUN_TIME
          type: SECRET
        - key: YAMO_MYSQL_PASSWORD
          scope: RUN_TIME
          type: SECRET
        - key: YAMO_MYSQL_DATABASE
          scope: RUN_TIME
          type: SECRET
        - key: YAMO_MYSQL_PORT
          scope: RUN_TIME
          value: "3306"
      http_port: 3000
      instance_count: 1
      instance_size_slug: basic-xxs
      health_check:
        http_path: /
        initial_delay_seconds: 30
      routes:
        - path: /
      source_dir: /